@'
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Serveur Work-Test ‚Äî Accueil</title>
  <style>
    :root{
      --bg:#0e0f14; --card:#141622; --txt:#e9ecf1; --muted:#a9b2c3;
      --line:rgba(255,255,255,.10); --a:#6ee7ff; --ok:#8ef7a3; --ko:#ffb4b4;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--txt)}
    a{color:var(--a);text-decoration:none}
    .wrap{max-width:1050px;margin:auto;padding:22px}
    .hero{
      border:1px solid var(--line);background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border-radius:22px;padding:18px
    }
    .top{display:flex;gap:14px;align-items:flex-start;justify-content:space-between;flex-wrap:wrap}
    h1{margin:0;font-size:22px}
    .subtitle{margin:6px 0 0;color:var(--muted);line-height:1.4}
    .badge{display:inline-flex;align-items:center;gap:10px;padding:8px 12px;border:1px solid var(--line);border-radius:999px;background:rgba(0,0,0,.22)}
    .dot{width:10px;height:10px;border-radius:50%}
    .dot.ok{background:var(--ok)} .dot.ko{background:var(--ko)}
    .grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:14px}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
    .card{border:1px solid var(--line);background:var(--card);border-radius:18px;padding:16px}
    .card h2{margin:0 0 8px;font-size:16px}
    .card p{margin:8px 0;color:var(--muted);line-height:1.4}
    .btnrow{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn{
      display:inline-flex;align-items:center;gap:10px;
      border:1px solid var(--line);background:rgba(255,255,255,.06);
      padding:10px 12px;border-radius:14px;font-weight:700;color:var(--txt)
    }
    .btn:hover{background:rgba(255,255,255,.10)}
    .mini{font-size:12px;color:var(--muted)}
    pre{margin:10px 0 0;background:rgba(0,0,0,.25);border:1px solid var(--line);
        padding:10px;border-radius:14px;overflow:auto;font-family:ui-monospace,Consolas,monospace}
    footer{margin-top:16px;color:var(--muted);font-size:12px}
    code{font-family:ui-monospace,Consolas,monospace}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="hero">
      <div class="top">
        <div>
          <h1>Serveur Work-Test ‚Äî Accueil</h1>
          <div class="subtitle">
            Portail local pour tes modules : Work-Test / Mini-WTD / Patrick Billy / Portfolio / XAMPP / Admin / Exports.
            <br>Objectif : <b>offline, simple, carr√©</b>.
          </div>
        </div>

        <div class="badge" title="Statut de la route API (si Express est actif)">
          <span class="dot ko" id="dot"></span>
          <strong id="status" aria-live="polite">API : inconnue</strong>
        </div>
      </div>

      <div class="btnrow">
        <a class="btn" href="./admin/">üîß Admin</a>
        <a class="btn" href="./mini-wtd/">üß™ Mini-WTD</a>
        <a class="btn" href="./patrick-billy/">üë§ Patrick Billy ‚Äî Officiel</a>
        <a class="btn" href="./pages/xampp.html">üõ†Ô∏è Configuration XAMPP</a>
        <a class="btn" href="./portfolio/">üóÇÔ∏è Portfolio (s√©par√©)</a>
        <a class="btn" href="./exports/">üì¶ Exports (dossier)</a>
      </div>

      <div class="mini" style="margin-top:10px">
        Conseil : garde ce portail en <code>index.html</code> et remplace ensuite chaque dossier par ton vrai contenu.
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Infos serveur</h2>
        <p>Pour v√©rifier vite que tu es au bon endroit.</p>
        <pre id="info">Chargement‚Ä¶</pre>
      </div>

      <div class="card">
        <h2>Export (si Express est actif)</h2>
        <p>Si ton <code>server.js</code> Express tourne, tu peux exporter en 1 clic via <code>/api/export</code>.</p>
        <div class="btnrow">
          <button class="btn" id="btnPing" type="button" aria-controls="out">‚úÖ Tester API</button>
          <button class="btn" id="btnExport" type="button" aria-controls="out">üì¶ Exporter ZIP</button>
        </div>
        <pre id="out">‚Äî</pre>
      </div>
    </div>

    <footer>
      ‚ö†Ô∏è Si tu utilises <b>http-server</b>, les boutons API ne marcheront pas (normal).  
      Ils marchent uniquement avec ton <b>Express</b> (server.js).
      <br>‚Ä¢ Le <b>Portfolio</b> est un dossier s√©par√© (<code>/portfolio/</code>) pour √©viter de m√©langer le site officiel et les pages vitrine.
    </footer>
  </div>

<script>
  const statusEl = document.getElementById("status");
  const dot = document.getElementById("dot");
  const infoEl = document.getElementById("info");
  const outEl = document.getElementById("out");

  function setApi(ok){
    statusEl.textContent = ok ? "API : OK" : "API : KO (ou non lanc√©e)";
    dot.className = "dot " + (ok ? "ok" : "ko");
  }

  function showInfo(){
    const host = location.hostname || "localhost";
    const port = location.port || "(auto)";
    const proto = location.protocol;
    infoEl.textContent =
`URL actuelle : ${proto}//${host}${location.port ? ":"+port : ""}/
Page       : ${location.pathname}
User-Agent : ${navigator.userAgent}`;
  }

  async function ping(){
    try{
      const r = await fetch("/api/ping", {cache:"no-store"});
      const j = await r.json();
      setApi(!!j.ok);
      outEl.textContent = JSON.stringify(j, null, 2);
    }catch(e){
      setApi(false);
      outEl.textContent = "Ping KO: " + e.message;
    }
  }

  async function doExport(){
    outEl.textContent = "Export en cours‚Ä¶";
    try{
      const r = await fetch("/api/export", {cache:"no-store"});
      const j = await r.json();
      if(!j.ok) throw new Error(j.error || "export failed");
      setApi(true);
      outEl.textContent = JSON.stringify(j, null, 2);
      window.open(j.download_url, "_blank");
    }catch(e){
      setApi(false);
      outEl.textContent = "Export KO: " + e.message;
    }
  }

  document.getElementById("btnPing").addEventListener("click", ping);
  document.getElementById("btnExport").addEventListener("click", doExport);

  showInfo();
  ping();
</script>
</body>
</html>
'@ | Set-Content "E:\serveur-work-test\WEB\index.html" -Encoding UTF8
